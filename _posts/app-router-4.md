---
title: "App Router[κ³ κΈ‰ λΌμ°ν… ν¨ν„΄, μ΄λ―Έμ§€ μµμ ν™”, SEO]"
description: "App Routerμ κ³ κΈ‰ λΌμ°ν… ν¨ν„΄, μ΄λ―Έμ§€ μµμ ν™” SEOμ— λ€ν•΄ μ•μ•„λ΄…λ‹λ‹¤."
thumbnail: "/assets/blog/app-router-4/cover.png"
tags: ["Next.js"]
createdAt: "2024λ…„ 10μ›” 06μΌ"
category: "DEV"
---

https://www.inflearn.com/course/%ED%95%9C%EC%9E%85-%ED%81%AC%EA%B8%B0-nextjs/dashboard

μΈν”„λ°μ ν• μ… ν¬κΈ°λ΅ μλΌλ¨Ήλ” Next.js κ°•μλ¥Ό λ“£κ³  μ •λ¦¬ν• λ‚΄μ©μ…λ‹λ‹¤.

---

## κ³ κΈ‰ λΌμ°ν… ν¨ν„΄

### Parallel Route (λ³‘λ ¬ λΌμ°νΈ)

ν¨λ΄λ  λΌμ°νΈλ” ν•λ‚μ ν™”λ©΄ μ•μ— μ—¬λ¬ νμ΄μ§€λ¥Ό λ³‘λ ¬λ΅ λ λ”λ§ μ‹μΌμ£Όλ” ν¨ν„΄μ…λ‹λ‹¤.

![parallel μ‹¤μµ ν™κ²½ ν΄λ” κµ¬μ΅°](/assets/blog/app-router-4/1.png)

λ¨Όμ € ν¨λ΄λ  λΌμ°νΈλ¥Ό μ μ©ν•  κ²½λ΅λ¥Ό μƒμ„±ν•μ—¬ νμ΄μ§€μ™€ λ μ΄μ•„μ›ƒμ„ μƒμ„±ν•΄μ¤λ‹λ‹¤.
μ¶”κ°€λ΅ μ΄λ¦„μ•μ— `@`κΈ°νΈκ°€ λ¶™μ€ `Slot`μ„ λ§λ“¤μ–΄μ¤λ‹λ‹¤.
μ¬λ΅―μ€ `()`λ¥Ό μ‚¬μ©ν• λΌμ°νΈ κ·Έλ£Ήμ²λΌ URL κ²½λ΅μ—λ” μ•„λ¬΄λ° μν–¥μ„ λ―ΈμΉμ§€ μ•μµλ‹λ‹¤.
λν• κ°―μ μ ν•μ΄ μ—†κΈ° λ•λ¬Έμ— μ—¬λ¬ μ¬λ΅―μ„ λ§λ“¤ μ μμµλ‹λ‹¤.

```js
import { ReactNode } from "react";

export default function Layout({
  children,
  sidebar,
}: {
  children: ReactNode,
  sidebar: ReactNode,
}) {
  return (
    <div>
      {sidebar}
      {children}
    </div>
  );
}
```

μ¬λ΅―μ€ λ³‘λ ¬λ΅ λ λ”λ§λ  νμ΄μ§€ μ»΄ν¬λ„νΈλ¥Ό λ³΄κ΄€ν•λ” ν΄λ”λ΅ μ¬λ΅― μ•μ— λ³΄κ΄€λ νμ΄μ§€ μ»΄ν¬λ„νΈλ” λ¶€λ¨μ λ μ΄μ•„μ›ƒ μ»΄ν¬λ„νΈμ `props`λ΅ μλ™μΌλ΅ μ „λ‹¬λ©λ‹λ‹¤.

![ν¨λ΄λ  λΌμ°νΈ μ μ© κ²°κ³Ό](/assets/blog/app-router-4/2.png)

`npm run dev`λ΅ ν”„λ΅μ νΈλ¥Ό μ‹¤ν–‰μ‹ν‚¤λ©΄ λ‘ κ°μ νμ΄μ§€ μ»΄ν¬λ„νΈκ°€ ν• νμ΄μ§€μ— μ μ©λ¨μΌλ΅μ¨ ν¨λ΄λ  λΌμ°νΈκ°€ μ μ μ©λ κ±Έ ν™•μΈν•  μ μμµλ‹λ‹¤.

![ν¨λ΄λ  λΌμ°νΈ μ¬λ΅―μ— μƒλ΅μ΄ νμ΄μ§€λ¥Ό μ¶”κ°€ν• ν΄λ” κµ¬μ΅°](/assets/blog/app-router-4/3.png)

μ¬λ΅― μ•μ— μƒλ΅μ΄ νμ΄μ§€λ¥Ό μ¶”κ°€ν•λ” κ²ƒλ„ κ°€λ¥ν•©λ‹λ‹¤.
`@sidebar` μ¬λ΅― μ•μ— `setting` ν΄λ”λ¥Ό λ§λ“¤κ³  νμ΄μ§€ μ»΄ν¬λ„νΈλ¥Ό λ§λ“¤λ©΄ νμ΄μ§€μ κ²½λ΅λ” `/parallel/setting`μ΄ λ©λ‹λ‹¤.

```js
export default function Layout({
  children,
  sidebar,
}: {
  children: ReactNode,
  sidebar: ReactNode,
}) {
  return (
    <div>
      <div>
        <Link href={"/parallel"}>parallel</Link>
        &nbsp;
        <Link href={"/parallel/setting"}>parallel/setting</Link>
      </div>
      <br />
      {sidebar}
      {children}
    </div>
  );
}
```

ν™•μΈν•΄λ³΄κΈ° μ„ν•΄ λ μ΄μ•„μ›ƒ μ»΄ν¬λ„νΈμ— `/parallel`κ³Ό `/parallel/setting` κ²½λ΅λ΅ μ΄λ™ν•λ” `Link` νƒκ·Έλ¥Ό λ§λ“¤μ–΄μ¤λ‹λ‹¤.

![ν¨λ΄λ  λΌμ°νΈ μ¬λ΅―μ— μƒλ΅μ΄ νμ΄μ§€λ¥Ό μ¶”κ°€ν• κ²°κ³Ό 1](/assets/blog/app-router-4/4.png)

`/parallel` κ²½λ΅λ΅ μ ‘μ†ν•λ©΄ `Link`νƒκ·Έλ§ μ¶”κ°€λκ³  λ‘ κ°μ νμ΄μ§€ μ»΄ν¬λ„νΈκ°€ λ³‘λ ¬λ΅ λ‚μ™€μλ” κ±Έ ν™•μΈν•  μ μμµλ‹λ‹¤.

![ν¨λ΄λ  λΌμ°νΈ μ¬λ΅―μ— μƒλ΅μ΄ νμ΄μ§€λ¥Ό μ¶”κ°€ν• κ²°κ³Ό 2](/assets/blog/app-router-4/5.png)

`/parallel/setting` κ²½λ΅λ΅ μ΄λ™ν•λ©΄ κΈ°μ΅΄μ `Parallel` νμ΄μ§€ μ»΄ν¬λ„νΈλ” κ·Έλ€λ΅ μ μ§€ν• μ±„λ΅ `@sidebar` μ¬λ΅―μ νμ΄μ§€λ§ `@sidebar/setting`λ΅ νμ΄μ§€κ°€ μ΄λ™ν• κ±Έ ν™•μΈν•  μ μμµλ‹λ‹¤.

`/parallel/setting` κ²½λ΅λ΅ μ΄λ™ν•λ©΄ λ μ΄μ•„μ›ƒμ— μ „λ‹¬λλ” `@sidebar` μ¬λ΅―μ€ μ•„λμ— `setting` ν΄λ”κ°€ μ΅΄μ¬ν•κΈ° λ•λ¬Έμ— `setting` ν΄λ” μ•„λμ— μλ” νμ΄μ§€ μ»΄ν¬λ„νΈκ°€ `props`λ΅ μ „λ‹¬λ©λ‹λ‹¤.

`children`κ°™μ€ κ²½μ°λ” `parallel` ν΄λ” μ•„λμ— `setting`μ΄λΌλ” ν΄λ”κ°€ μ΅΄μ¬ν•μ§€ μ•μµλ‹λ‹¤. μ΄λ¬λ©΄ μ—†λ” νμ΄μ§€κΈ° λ•λ¬Έμ— `404`μ™€ κ°™μ€ μƒν™©μ΄μ§€λ§ Nextμ—μ„ μ΄μ „μ νμ΄μ§€λ¥Ό μ μ§€ν•λ„λ΅ μ²λ¦¬ν•©λ‹λ‹¤. λ”°λΌμ„ μ΄μ „ νμ΄μ§€μΈ `parallel` ν΄λ” μ•„λμ— μλ” νμ΄μ§€ μ»΄ν¬λ„νΈκ°€ μ μ§€λ©λ‹λ‹¤.

![ν¨λ΄λ  λΌμ°νΈ μ¬λ΅―μ— μƒλ΅μ΄ νμ΄μ§€λ¥Ό μ¶”κ°€ν• κ²°κ³Ό 3](/assets/blog/app-router-4/6.png)

ν•μ§€λ§ μ΄μ „μ νμ΄μ§€λ¥Ό μ μ§€ν•κ² λλ” κ±΄ μ¤μ§ `Link` μ»΄ν¬λ„νΈλ¥Ό μ΄μ©ν•μ—¬ λΈλΌμ°μ € μΈ΅μ—μ„ CSR λ°©μ‹μΌλ΅ νμ΄μ§€λ¥Ό μ΄λ™ν•  λ•λ§ ν•μ •λ μ΄μ•ΌκΈ°μ…λ‹λ‹¤.
κ·Έλ ‡κΈ° λ•λ¬Έμ— λΈλΌμ°μ €μ—μ„ μƒλ΅κ³ μΉ¨μ„ ν•κ² λλ©΄ 404 νμ΄μ§€λ΅ λ¦¬λ‹¤μ΄λ ‰μ…μ΄ λλ” κ±Έ ν™•μΈν•  μ μμµλ‹λ‹¤.
μƒλ΅ κ³ μΉ¨μ„ ν•΄μ„ `/parallel/setting` κ²½λ΅μ— μ²μ μ ‘μ†ν•λ” κ²½μ°μ—λ” λ μ΄μ•„μ›ƒ μ»΄ν¬λ„νΈμ—μ„ `children`μ νμ΄μ§€λ¥Ό λ λ”λ§ν•  λ• μ΄μ „μ νμ΄μ§€λ¥Ό λ¨λ¥΄κΈ° λ•λ¬Έμ…λ‹λ‹¤.
μƒλ΅ κ³ μΉ¨μ„ ν–λ‹¤λ” κ²ƒμ€ μ΄κΈ° μ ‘μ†μ„ μλ―Έν•¨μΌλ΅ μ΄μ „ κ°’μ„ μ°Ύμ„ μ μ—†κΈ° λ•λ¬Έμ— 404 νμ΄μ§€κ°€ λ°ν™λ©λ‹λ‹¤.

![default νμ΄μ§€λ¥Ό μ¶”κ°€ν• ν΄λ” κµ¬μ΅°](/assets/blog/app-router-4/7.png)

```js
export default function Default() {
  return <div>Parallel Default</div>;
}
```

μ΄λ° λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ ν„μ¬ λ λ”λ§ν•  νμ΄μ§€κ°€ μ—†μ„ λ• λ€μ‹  λ λ”λ§ν•  `default` νμ΄μ§€λ¥Ό λ§λ“¤μ–΄μ£Όλ©΄ λ©λ‹λ‹¤.
`default.tsx`λΌλ” μ•½μ†λ μ΄λ¦„μ νμΌμ„ λ§λ“¤μ–΄μ£Όκ³  λ‚΄μ©μ„ μ‘μ„±ν•΄μ¤λ‹λ‹¤.

![default νμ΄μ§€λ¥Ό μ¶”κ°€ν• κ²°κ³Ό](/assets/blog/app-router-4/7.png)

λΈλΌμ°μ €μ—μ„ μƒλ΅κ³ μΉ¨μ„ ν•λ©΄ 404 νμ΄μ§€λ΅ λ³΄λ‚΄μ§€μ§€ μ•κ³  default νμ΄μ§€λ¥Ό λ λ”λ§ν•λ” κ±Έ ν™•μΈν•  μ μμµλ‹λ‹¤.

λ”°λΌμ„ νΉμ • μ¬λ΅― λ°‘μ— νΉμ • νμ΄μ§€λ¥Ό μ¶”κ°€ν•λ” κ²½μ°μ—λ” 404 νμ΄μ§€λ΅ λ³΄λ‚΄μ§€λ” λ¬Έμ λ¥Ό λ°©μ§€ν•κΈ° μ„ν•΄ default νμ΄μ§€λ¥Ό μ¶”κ°€ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤.

### Intercepting Route (μΈν„°μ…‰ν… λΌμ°νΈ)

μΈν„°μ…‰ν… λΌμ°νΈλ€ μ‚¬μ©μκ°€ λ™μΌν• νμ΄μ§€μ— μ ‘μ†ν•κ² λλ”λΌλ„ νΉμ • μ΅°κ±΄μ„ λ§μ΅±ν•κ² λλ©΄ μ”μ²­μ„ κ°€λ΅μ±„μ„ μ›λ λ λ”λ§λ  νμ΄μ§€κ°€ μ•„λ‹ μ›ν•λ” νμ΄μ§€λ¥Ό λ€μ‹  λ λ”λ§ν•λ„λ΅ μ„¤μ •ν•λ” λΌμ°ν… ν¨ν„΄μ„ μλ―Έν•©λ‹λ‹¤.
μΈν„°μ…‰ν… λΌμ°νΈλ¥Ό λ™μ‘μ‹ν‚¤λ” νΉμ • μ΅°κ±΄μ΄λ€ μ§μ ‘ μ„¤μ •ν•λ” κ²ƒμ΄ μ•„λ‹ μ΄κΈ° μ ‘μ† μ”μ²­μ΄ μ•„λ‹ κ²½μ°μ—λ§ λ§μ΅±ν•λ„λ΅ Nextμ—μ„ μ •ν•΄λ’€μµλ‹λ‹¤.
μ¦‰ `Link` μ»΄ν¬λ„νΈλ‚ `Router` κ°μ²΄μ `push` λ©”μ„λ“λ¥Ό μ΄μ©ν•μ—¬ κ²½λ΅λ¥Ό μ΄λ™ν• κ²½μ°μ—λ§ μΈν„°μ…‰ν… λΌμ°νΈκ°€ λ™μ‘ν•©λ‹λ‹¤.

μΈν„°μ…‰ν… λΌμ°νΈμ λ€ν‘μ μΈ μμ‹κ°€ μΈμ¤νƒ€κ·Έλ¨μ…λ‹λ‹¤.

![μΈν„°μ…‰ν… λΌμ°νΈμ λ€ν‘μ μΈ μμ‹μΈ μΈμ¤νƒ€κ·Έλ¨ μΊ΅μ³ 1](/assets/blog/app-router-4/9.png)

μΈμ¤νƒ€κ·Έλ¨μ—μ„ νΉμ • κ²μ‹λ¬Όμ„ ν΄λ¦­ν•λ©΄ μ›λ λ³΄κ³  μμ—λ ν”Όλ“ νμ΄μ§€ μ„λ΅ κ²μ‹κΈ€μ μƒμ„Ένμ΄μ§€λ¥Ό λ„μ›μ¤μΌλ΅μ¨ λ’¤λ΅ κ°”μ„ λ• νƒμƒ‰ν•λ ν”Όλ“λ΅ λμ•„μ¤λ„λ΅ λ§λ“¤μ–΄μ¤λ‹λ‹¤.

![μΈν„°μ…‰ν… λΌμ°νΈμ λ€ν‘μ μΈ μμ‹μΈ μΈμ¤νƒ€κ·Έλ¨ μΊ΅μ³ 2](/assets/blog/app-router-4/10.png)

λΈλΌμ°μ €μ—μ„ μƒλ΅ κ³ μΉ¨μ„ ν•μ—¬ μ΄κΈ° μ ‘μ† μ”μ²­μΌλ΅ μ ‘μ†ν•κ² λλ©΄ κ²μ‹κΈ€μ μƒμ„Έ νμ΄μ§€λ΅ μ™„μ „ν μ΄λ™ν•©λ‹λ‹¤.

CSR λ°©μ‹μΌλ΅ μ ‘μ†ν•μ€μ„ λ•λ” μΈν„°μ…‰ν… λΌμ°νΈκ°€ λ™μ‘ν•μ—¬ ν™”λ©΄μ— λ¨λ‹¬ ν•νƒλ΅ νμ΄μ§€κ°€ λ λ”λ§λμ§€λ§ μ΄κΈ° μ ‘μ† μ”μ²­μΌλ΅ νμ΄μ§€μ— μ ‘μ†ν•  κ²½μ°μ—λ” μΈν„°μ…‰ν… λΌμ°νΈκ°€ λ™μ‘ν•μ§€ μ•κΈ° λ•λ¬Έμ— μ›λ κ²μ‹κΈ€μ μƒμ„Έ νμ΄μ§€κ°€ λ λ”λ§λλ” κ±Έ ν™•μΈν•  μ μλ” λ°©μ‹μ΄ μΈν„°μ…‰ν… λΌμ°νΈλ¥Ό μ΄μ©ν•λ©΄ κµ¬ν„ν•  μ μλ” ν¨ν„΄μ…λ‹λ‹¤.

![μΈν„°μ…‰ν… λΌμ°νΈλ¥Ό μ μ©ν•κΈ° μ„ν• ν΄λ” κµ¬μ΅°](/assets/blog/app-router-4/11.png)

μΈν„°μ…‰ν… λΌμ°νΈλ¥Ό μ μ©ν•κΈ° μ„ν•΄μ„ `app` ν΄λ” μ•„λμ— `book/[id]`λ¥Ό κ°€λ΅μ±„λ” ν΄λ”λ¥Ό λ§λ“¤μ–΄μ£ΌκΈ° μ„ν•΄ `(.)book/[id]` ν΄λ”λ¥Ό λ§λ“¤μ–΄μ¤λ‹λ‹¤.
μ΄λ• `(.)`μ μλ―Έλ” `(.)` λ’¤μ— λ‚μ¤λ” `book/[id]` κ²½λ΅λ¥Ό κ°€λ΅μ±„λΌλ” μλ―Έμ…λ‹λ‹¤.
μ¶”κ°€λ΅ μ†κ΄„νΈ μ•μ— `.`μ΄ ν•λ‚λ§ μ°νκ² λλ‹¤λ©΄ λ™μΌν• κ²½λ΅μ— μλ” `book/[id]`λΌλ” νμ΄μ§€λ¥Ό μΈν„°μ…‰ν…ν•κ² λ‹¤λ” μλ―Έμ…λ‹λ‹¤.
λ§μ•½ λ¶€λ¨ ν΄λ”μ— κ°€λ΅μ± κ²½λ΅κ°€ μλ‹¤λ©΄ `(..)`, λ‘ λ‹¨κ³„ μ„μ— μλ” κ²½λ΅λ©΄ `(..)(..)`, `app` ν΄λ” λ°”λ΅ λ°‘μ— μλ” ν΄λ”λ¥Ό μΈν„°μ…‰ν…ν•κ² λ‹¤λ” μλ―Έλ΅ `(...)`λ΅ μ‘μ„±ν•΄μ•Ό ν•©λ‹λ‹¤.

```js
export default function Page(props: any) {
  return <div>κ°€λ΅μ±„κΈ° μ„±κ³µ!</div>;
}
```

μΈν„°μ…‰ν… λΌμ°νΈλ¥Ό ν™•μΈν•κΈ° μ„ν•΄ νμ΄μ§€ μ»΄ν¬λ„νΈλ¥Ό μ‘μ„±ν•©λ‹λ‹¤.

![μΈν„°μ…‰ν… λΌμ°νΈλ¥Ό μ μ© κ²°κ³Ό](/assets/blog/app-router-4/12.png)

ν”„λ΅μ νΈλ¥Ό μ‹¤ν–‰μ‹ν‚¤κ³  CSR λ°©μ‹μΌλ΅ νμ΄μ§€λ΅ μ΄λ™ν•κ² λλ©΄ μΈν„°μ…‰ν… λΌμ°νΈκ°€ μ μ μ©λ κ±Έ ν™•μΈν•  μ μμµλ‹λ‹¤.

```js
import BookPage from "@/app/book/[id]/page";
import Modal from "@/components/modal";

export default function Page(props: any) {
  return (
    <Modal>
      <BookPage {...props} />
    </Modal>
  );
}
```

μΈν„°μ…‰ν… λΌμ°νΈμ— λ€ν•΄ μ§‘μ¤‘μ μΌλ΅ λ‹¤λ£¨κΈ° μ„ν•΄ `Modal` μ»΄ν¬λ„νΈλ¥Ό μ‘μ„±ν•κ³  μ μ©ν•λ” λ¶€λ¶„μ€ μƒλµν–μµλ‹λ‹¤.

![μΈν„°μ…‰ν… λΌμ°νΈλ¥Ό μ μ© κ²°κ³Ό2](/assets/blog/app-router-4/13.png)

μΈμ¤νƒ€κ·Έλ¨μ²λΌ λ¨λ‹¬μ°½μΌλ΅ λ„μ›μ£ΌκΈ° μ„ν•΄ κΈ°μ΅΄μ `book/[id]` νμ΄μ§€ μ»΄ν¬λ„νΈλ¥Ό λ¶λ¬μ™€μ„ μΈμλ¥Ό κ·Έλ€λ΅ λ„κ²¨μ£Όκ³  λ¨λ‹¬μ°½μ— λ„μ›μ£Όλ„λ΅ μμ •ν•©λ‹λ‹¤.
λ‹¤μ‹ λΈλΌμ°μ €μ—μ„ CSRλ°©μ‹μΌλ΅ νμ΄μ§€μ— μ ‘μ†ν•λ©΄ λ¨λ‹¬μ°½μΌλ΅ λ„μ›μ§€λ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

### ν¨λ΄λ  & μΈν„°μ…‰ν… λΌμ°νΈ

μΈν„°μ…‰ν… λΌμ°νΈλ¥Ό ν†µν•΄ κΈ°μ΅΄ νμ΄μ§€λ¥Ό λ¨λ‹¬μ°½μΌλ΅ λ„μ›μ£ΌκΈ΄ ν–μ§€λ§ λ¨λ‹¬μ λ’· λ°°κ²½μΌλ΅ λ‚μ¤λ” νμ΄μ§€λ” μΈλ±μ¤ νμ΄μ§€κ°€ μ•„λ‹ μΈν„°μ…‰ν… νμ΄μ§€κ°€ λ‚μ¤κ³  μμµλ‹λ‹¤.
λ¨λ‹¬μ°½μ΄ μ—΄λ ¤μμ„ λ• λ’· λ°°κ²½μ— μΈλ±μ¤ νμ΄μ§€κ°€ λ³‘λ ¬λ΅ λ‚μ¤λ„λ΅ μμ •ν•κΈ° μ„ν•΄ ν¨λ΄λ  λΌμ°νΈλ¥Ό μ΄μ©ν•΄μ•Ό ν•©λ‹λ‹¤.

![μΈν„°μ…‰ν… λΌμ°νΈλ¥Ό μ μ© κ²°κ³Ό3](/assets/blog/app-router-4/14.png)

ν¨λ΄λ  λΌμ°νΈλ¥Ό μ μ©ν•κΈ° μ„ν•΄ `@modal` μ¬λ΅―μ„ λ§λ“¤μ–΄μ£Όκ³  κΈ°μ΅΄μ `(.)book/[id]` ν΄λ”λ¥Ό μ¬λ΅― μ•μΌλ΅ μ®κ²¨μ¤λ‹λ‹¤.
`(.)book/[id]` ν΄λ”μ— μλ” νμ΄μ§€ μ»΄ν¬λ„νΈλ” `@modal` μ¬λ΅― μ•„λμ— μκΈ° λ•λ¬Έμ— λ¶€λ¨ λ μ΄μ•„μ›ƒμΈ λ£¨νΈ λ μ΄μ•„μ›ƒμ `props`λ΅ μ „λ‹¬λ©λ‹λ‹¤.

```js
export default function Default() {
  return null;
}
```

μ¶”κ°€λ΅ `@modal` μ¬λ΅―μ— `/` κ²½λ΅μ— λ€ν• νμ΄μ§€κ°€ μ΅΄μ¬ν•μ§€ μ•κΈ° λ•λ¬Έμ— 404 νμ΄μ§€λ΅ λ¦¬λ‹¤μ΄λ ‰μ…μ„ λ§‰κΈ° μ„ν•΄μ„ `default.tsx`λ¥Ό λ§λ“¤μ–΄ μ¤λ‹λ‹¤.

```js
export default function RootLayout({
  children,
  modal,
}: Readonly<{
  children: React.ReactNode,
  modal: ReactNode,
}>) {
  return (
    <html lang="en">
      <body>
        <div className={style.container}>
          <header>
            <Link href={"/"}>π“ ONEBITE BOOKS</Link>
          </header>
          <main>{children}</main>
          <Footer />
        </div>
        {modal}
        <div id="modal-root"></div>
      </body>
    </html>
  );
}
```

λ£¨νΈ λ μ΄μ•„μ›ƒμ„ μ„μ™€ κ°™μ΄ μ‘μ„±ν•κ³  μ‚¬μ©μκ°€ `/` κ²½λ΅λ΅ μ ‘μ†ν•κ² λλ©΄ `children`μ€ μΈλ±μ¤ νμ΄μ§€ μ»΄ν¬λ„νΈκ°€ λ“¤μ–΄μ¤κ³  `@modal` μ¬λ΅― μ•μ— μΈλ±μ¤ νμ΄μ§€μ— λ€ν• μ»΄ν¬λ„νΈκ°€ μ—†κΈ° λ•λ¬Έμ— `default` μ»΄ν¬λ„νΈκ°€ λ‚νƒ€λ‚λ”λ° `null`μ„ λ°ν™ν•λ―€λ΅ `children`μ νμ΄μ§€ μ»΄ν¬λ„νΈλ§ λ λ”λ§λ©λ‹λ‹¤.

![μΈν„°μ…‰ν… λΌμ°νΈλ¥Ό μ μ© κ²°κ³Ό4](/assets/blog/app-router-4/15.png)

μ‚¬μ©μκ°€ `book/[id]` νμ΄μ§€λ΅ μ ‘μ†ν•λ©΄ μ›λλ” `children`μ— `book/[id]`μ νμ΄μ§€ μ»΄ν¬λ„νΈκ°€ λ“¤μ–΄μ™”κ² μ§€λ§ μΈν„°μ…‰ν…μ΄ λ™μ‘ν•μ—¬ κ²½λ΅λ¥Ό κ°€λ΅μ±κΈ° λ•λ¬Έμ— κΈ°μ΅΄μ μΈλ±μ¤ νμ΄μ§€λ¥Ό μ μ§€ν•κ² λκ³  `modal`μ΄λΌλ” κ°’μΌλ΅ μΈν„°μ…‰ν…λ `(.)book/[id]`μ νμ΄μ§€ μ»΄ν¬λ„νΈκ°€ λ“¤μ–΄μ™€μ„ μΈλ±μ¤ νμ΄μ§€μ™€ λ¨λ‹¬λ΅μ„ `(.)book/[id]` νμ΄μ§€κ°€ ν•¨κ» λ³‘λ ¬λ΅ λ λ”λ§λ©λ‹λ‹¤.

## μ΄λ―Έμ§€ μµμ ν™”

μ›Ή νμ΄μ§€μ—μ„ ν‰κ· μ μΌλ΅ κ°€μ¥ λ§μ€ μ©λ‰μ„ μ°¨μ§€ν•λ” μ”μ†λ” μ΄λ―Έμ§€μ…λ‹λ‹¤.
κ·Έλ ‡κΈ° λ•λ¬Έμ— μ΄λ―Έμ§€λ¥Ό μµμ ν™”ν•λ” μΌμ€ μ¤‘μ”ν• μΌμ΄ λμ—μµλ‹λ‹¤.
κ·Έλμ„ webp, AVIF λ“±μ μ°¨μ„Έλ€ ν•μ‹μΌλ΅ λ³€ν™ν•κΈ°, λ””λ°”μ΄μ¤ μ‚¬μ΄μ¦μ— λ§λ” μ΄λ―Έμ§€ λ¶λ¬μ¤κΈ°, λ μ΄μ§€ λ΅λ”© μ μ©ν•κΈ°, λΈ”λ¬ μ΄λ―Έμ§€ ν™μ©ν•κΈ° λ“± λ§μ€ μ΄λ―Έμ§€ μµμ ν™” κΈ°λ²•λ“¤μ΄ μƒκ²¨λ‚¬μµλ‹λ‹¤.
μ›λλΌλ©΄ μ΄λ¬ν• μ΄λ―Έμ§€ μµμ ν™” κΈ°λ²•λ“¤μ„ κ³µλ¶€ν•μ—¬ μ μ©μ‹μΌμ•Ό ν–μ§€λ§ Nextμ—μ„λ” `Image`λΌλ” λ‚΄μ¥ μ»΄ν¬λ„νΈ ν•λ‚λ§ μ‚¬μ©ν•λ©΄ λ€λ¶€λ¶„μ μ΄λ―Έμ§€ μµμ ν™” κΈ°λ²•μ„ μ κ³µν•©λ‹λ‹¤.

![μ΄λ―Έμ§€ μµμ ν™” μ „ μƒν™©1](/assets/blog/app-router-4/16.png)

κΈ°μ΅΄ `img` νƒκ·Έλ¥Ό μ‚¬μ©ν•μ—¬ λ„¤νΈμ›ν¬ νƒ­μ„ ν™•μΈν•λ©΄ μ΄λ―Έμ§€μ ν•μ‹μ΄ `jpeg`λ΅ λ¶λ¬μ¤κ³  μμµλ‹λ‹¤. `jpeg` ν•μ‹λ³΄λ‹¨ `webp`λ‚ `AVIF` λ“±μ κ²½λ‰ν™”λ μ΄λ―Έμ§€ ν¬λ§·μ„ λ§μ΄ ν™μ©ν•λ” μ¶”μ„Έμ…λ‹λ‹¤.
μ¶”κ°€λ΅ ν„μ¬ ν™”λ©΄μ— λ‚μ¤μ§€ μ•λ” λ λ”λ§λ  ν•„μ”κ°€ μ—†λ” μ΄λ―Έμ§€κΉμ§€ νμ΄μ§€μ— ν¬ν•¨λ§ λκ³  μλ‹¤λ©΄ λ¨λ‘ λ¶λ¬μ¤κ³  μμµλ‹λ‹¤.

![μ΄λ―Έμ§€ μµμ ν™” μ „ μƒν™©1](/assets/blog/app-router-4/17.png)

λν• λ¶λ¬μ¨ μ΄λ―Έμ§€μ μ‚¬μ΄μ¦κ°€ μ‹¤μ  ν™”λ©΄μ— λ‚νƒ€λ‚  μ‚¬μ΄μ¦λ³΄λ‹¤ ν½λ‹λ‹¤.
λ„¤νΈμ›ν¬ νƒ­μ ν•λ‹¨μ„ λ³΄λ©΄ μ‹¤μ λ΅ λ³΄μ—¬μ§€λ” `80x105` ν”½μ…€λ³΄λ‹¤ `458x583` ν”½μ…€μ΄λΌλ” κ±°λ€ν• μ‚¬μ΄μ¦λ΅ λ¶λ¬μ¤λ” κ±Έ ν™•μΈν•  μ μμµλ‹λ‹¤.

```js
<Image
  src={coverImgUrl}
  width={80}
  height={105}
  alt={`λ„μ„ ${title}μ ν‘μ§€ μ΄λ―Έμ§€`}
/>
```

`Image` μ»΄ν¬λ„νΈλ¥Ό ν™μ©ν•μ—¬ μ½”λ“λ¥Ό μ‘μ„±ν•κ³  λ‹¤μ‹ ν• λ² λΈλΌμ°μ €λ¥Ό ν™•μΈν•΄λ΄…λ‹λ‹¤.

![μ΄λ―Έμ§€ μµμ ν™” ν›„ μƒν™©1](/assets/blog/app-router-4/17-1.png)

μ΄λ―Έμ§€μ ν•μ‹μ΄ `webp`λ΅ λ³€ν™λμ–΄ κ²½λ‰ν™”λ ν•νƒλ΅ μ΄λ―Έμ§€λ¥Ό λ¶λ¬μ¤κ³  μ‘μ€ μ©λ‰μΌλ΅ λ¶λ¬μ™€μ§€λ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
μ¶”κ°€λ΅ ν„μ¬ ν™”λ©΄μ— λ³΄μ΄μ§€ μ•λ” μ΄λ―Έμ§€λ” λ’¤λ¦κ² λ¶λ¬μ¤λ” κΈ°λ¥κΉμ§€ λ”ν•΄μ Έ μ¤ν¬λ΅¤μ„ μ•„λλ΅ λ‚΄λ¦¬λ©΄ κ·Έμ μ„μ•Ό μ΄λ―Έμ§€λ¥Ό μ¶”κ°€λ΅ λ¶λ¬μµλ‹λ‹¤.

## κ²€μƒ‰ μ—”μ§„ μµμ ν™” (SEO)

κ²€μƒ‰ μ—”μ§„ μµμ ν™”λ€ κµ¬κΈ€μ΄λ‚ λ„¤μ΄λ²„ λ“±μ κ²€μƒ‰ μ—”μ§„μ„ κ°€μ§€κ³  μλ” ν¬ν„Έ μ‚¬μ΄νΈλ“¤μ—μ„ μ μ‘ν• μ„λΉ„μ¤μ νμ΄μ§€ μ •λ³΄λ¥Ό μμ§‘ν•΄κ° μ μλ„λ΅ μ„¤μ •ν•μ—¬ κ²°κ³Όμ μΌλ΅ μ„λΉ„μ¤κ°€ κ²€μƒ‰ κ²°κ³Όμ— μ λ…Έμ¶μ΄ λλ„λ΅ μ„¤μ •ν•λ” κΈ°μ μ…λ‹λ‹¤.

κ²€μƒ‰ μ—”μ§„μ„ μ„¤μ •ν•λ” λ°©λ²•μ—λ” Sitemap μ„¤μ •, RSS λ°ν–‰, μ‹λ©ν‹± νƒκ·Έ μ„¤μ •, λ©”νƒ€ λ°μ΄ν„° μ„¤μ • λ“± μ—¬λ¬ λ°©λ²•μ΄ μ΅΄μ¬ν•©λ‹λ‹¤.

μ—¬κΈ°μ„λ” νμ΄μ§€λ³„ λ©”νƒ€ λ°μ΄ν„°λ¥Ό μ μ©ν•λ” λ°©λ²•μ„ μ μ©ν•λ ¤ ν•©λ‹λ‹¤.

```js
export const metadata: Metadata = {
  title: "ν•μ… λ¶μ¤",
  description: "ν•μ… λ¶μ¤μ— λ“±λ΅λ λ„μ„λ¥Ό λ§λ‚λ³΄μ„Έμ”",
  openGraph: {
    title: "ν•μ… λ¶μ¤",
    description: "ν•μ… λ¶μ¤μ— λ“±λ΅λ λ„μ„λ¥Ό λ§λ‚λ³΄μ„Έμ”",
    images: ["/thumbnail.png"],
  },
};
```

νμ΄μ§€μ λ©”νƒ€ λ°μ΄ν„°λ¥Ό μ„¤μ •ν•κΈ° μ„ν•΄μ„λ” νμ΄μ§€ μ»΄ν¬λ„νΈ μ„μ— `metadata`λΌλ” μ•½μ†λ μ΄λ¦„μ λ³€μλ¥Ό μ„ μ–Έν•μ—¬ `export`λ΅ λ‚΄λ³΄λ‚΄μ£Όλ©΄ `metadata`μ— μ„¤μ •λ κ°’μ΄ μλ™μΌλ΅ νμ΄μ§€μ λ©”νƒ€ λ°μ΄ν„°λ΅ μ„¤μ •λ©λ‹λ‹¤.

![λ©”νƒ€ λ°μ΄ν„°κ°€ μ„¤μ •λ κ²°κ³Ό](/assets/blog/app-router-4/18.png)

λΈλΌμ°μ €λ¥Ό ν™•μΈν•λ©΄ `meatadata` λ³€μμ— μ„¤μ •ν• κ°’λ“¤μ΄ μ μ„¤μ •λ κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
λν• `twitter`λ§μ„ μ„ν• λ©”νƒ€ νƒκ·Έλ“¤λ„ Nextμ—μ„ μλ™μΌλ΅ μ„¤μ •ν•΄μ¤λ‹λ‹¤.

```js
export function generateMetadata({ searchParams }: Props): Metadata {
  return {
    title: `${searchParams.q} : ν•μ…λ¶μ¤ κ²€μƒ‰`,
    description: `${searchParams.q} κ²€μƒ‰ κ²°κ³Όμ…λ‹λ‹¤`,
    openGraph: {
      title: `${searchParams.q} ν•μ…λ¶μ¤ κ²€μƒ‰`,
      description: `${searchParams.q} κ²€μƒ‰ κ²°κ³Όμ…λ‹λ‹¤`,
      images: ["/thumbnail.png"],
    },
  };
}
```

λ§μ•½ λ™μ μΈ κ°’μ„ ν†µν•΄μ„ λ©”νƒ€ λ°μ΄ν„°λ¥Ό μ„¤μ •ν•΄μ•Ό ν•λ‹¤λ©΄ `generateMeatadata`λΌλ” μ•½μ†λ μ΄λ¦„μ ν•¨μλ¥Ό μ„ μ–Έν•κ³  λ©”νƒ€ λ°μ΄ν„°λ¥Ό λ°ν™ν•λ„λ΅ ν•μ—¬ `export`λ΅ λ‚΄λ³΄λ‚΄μ£Όλ©΄ λ©λ‹λ‹¤.
`generateMetadata` ν•¨μλ” ν„μ¬ νμ΄μ§€μ— ν•„μ”ν• λ©”νƒ€ λ°μ΄ν„°λ¥Ό λ™μ μΌλ΅ μƒμ„±ν•΄μ£Όλ” ν•¨μμ…λ‹λ‹¤.
κ·Έλ ‡κΈ° λ•λ¬Έμ— λ§¤κ° λ³€μλ΅ νμ΄μ§€ μ»΄ν¬λ„νΈμ—κ² μ „λ‹¬λλ” `props`λ¥Ό λ‘κ°™μ΄ μ „λ‹¬λ°›κ² λ©λ‹λ‹¤.

![λ©”νƒ€ λ°μ΄ν„°κ°€ μ„¤μ •λ κ²°κ³Ό2](/assets/blog/app-router-4/19.png)

κ²€μƒ‰μ°½μ— `μλ°”`λΌκ³  κ²€μƒ‰ν•κ³  λ©”νƒ€ νƒκ·Έλ¥Ό ν™•μΈν•λ©΄ μ μ„¤μ •λ κ±Έ ν™•μΈν•  μ μμµλ‹λ‹¤.

```js
export async function generateMetadata({
  params,
}: {
  params: {
    id: string,
  },
}): Promise<Metadata | null> {
  const response = await fetch(
    `${process.env.NEXT_PUBLIC_API_SERVER_URL}/book/${params.id}`,
    { cache: "force-cache" }
  );

  if (!response.ok) {
    throw Error(response.statusText);
  }

  const book: BookData = await response.json();
  return {
    title: `${book.title} - ν•μ…λ¶μ¤`,
    description: `${book.description}`,
    openGraph: {
      title: `${book.title} - ν•μ…λ¶μ¤`,
      description: `${book.description}`,
      images: [book.coverImgUrl],
    },
  };
}
```

`generateMetadata` ν•¨μμ—μ„ `async-await`λ¥Ό ν™μ©ν•μ—¬ λ°μ΄ν„° ν¨μΉ­μ„ ν•  μ μμµλ‹λ‹¤.
λ€μ‹ μ— λ°ν™ νƒ€μ…μ„ `Metadata`κ°€ μ•„λ‹λΌ `Promise<Metadata | null>`λ΅ μ„¤μ •ν•΄μ¤μ•Ό ν•©λ‹λ‹¤.

![λ©”νƒ€ λ°μ΄ν„°κ°€ μ„¤μ •λ κ²°κ³Ό3](/assets/blog/app-router-4/20.png)

λ‹¤μ‹ ν• λ² λΈλΌμ°μ €μ—μ„ ν™•μΈν•λ©΄ λ©”νƒ€ λ°μ΄ν„°κ°€ μ μ„¤μ •λ κ±Έ ν™•μΈν•  μ μμµλ‹λ‹¤.
ν•μ§€λ§ μΈν„°μ…‰ν… λΌμ°νΈ ν™κ²½μ—μ„λ” λ©”νƒ€ λ°μ΄ν„°κ°€ μ μ©λμ§€ μ•μµλ‹λ‹¤.
λ©”νƒ€ λ°μ΄ν„°λ“¤μ€ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ—μ„ νμ΄μ§€λ¥Ό μ΄λ™ν•  λ• ν•„μ”ν• κ²ƒμ΄ μ•„λ‹λΌ νμ΄μ§€μ μ£Όμ†λ¥Ό μ‚¬λλ“¤κ³Ό κ³µμ ν•κ±°λ‚ μ΄κΈ° μ ‘μ†μ„ ν•  λ• μ¤‘μ”ν•κ² μ‚¬μ©λλ” νƒκ·ΈκΈ° λ•λ¬Έμ— μΈν„°μ…‰ν… λΌμ°νΈ ν™κ²½μ—μ„λ” μ¤‘μ”ν•μ§€ μ•κΈ° λ•λ¬Έμ— μ΄ λ¶€λ¶„μ€ κ°μ•ν•μ…”λ„ κ΄μ°®λ‹¤κ³  ν•©λ‹λ‹¤.
